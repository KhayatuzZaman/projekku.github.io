<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Profil - Safindra Skin Clinic</title>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body class="bg-gray-100">
    <!-- Main Container -->
    <div class="min-h-screen flex items-center justify-center">
      <div class="bg-white shadow-lg rounded-lg w-11/12 md:w-1/2 lg:w-1/3 p-8">
        <h2 class="text-2xl font-bold text-center text-gray-700 mb-6">Profil Pengguna</h2>

        <div class="mb-4">
          <label class="block text-gray-600 mb-2">Nama Lengkap</label>
          <p id="profile-name" class="w-full border border-gray-300 rounded-lg px-4 py-2 bg-gray-100 text-gray-700">Nama Lengkap</p>
        </div>

        <div class="mb-4">
          <label class="block text-gray-600 mb-2">Email</label>
          <p id="profile-email" class="w-full border border-gray-300 rounded-lg px-4 py-2 bg-gray-100 text-gray-700">Email</p>
        </div>

        <div class="flex justify-center space-x-4">
          <button
            class="w-full bg-[#800080] text-white py-2 rounded-lg hover:bg-purple-800 focus:outline-none focus:ring-2 focus:ring-purple-500"
            onclick="goBackToConsultation()"
          >
            Kembali ke Konsultasi
          </button>

          <button
            class="w-full bg-red-600 text-white py-2 rounded-lg hover:bg-red-800 focus:outline-none focus:ring-2 focus:ring-red-500"
            onclick="logOut()"
          >
            Log Out
          </button>
        </div>
      </div>
    </div>

    <script>
      // Fungsi untuk menampilkan profil pengguna
      function displayProfile() {
        const users = JSON.parse(localStorage.getItem('users')) || [];
        const userEmail = localStorage.getItem('loggedInUser');
        const user = users.find(user => user.email === userEmail);

        if (user) {
          document.getElementById('profile-name').innerText = user.name;
          document.getElementById('profile-email').innerText = user.email;
        } else {
          alert('Pengguna tidak ditemukan. Pastikan Anda sudah login!');
          window.location.href = '/login'; // Arahkan ke halaman login jika tidak ada pengguna yang login
        }
      }

      // Fungsi untuk kembali ke halaman konsultasi
      function goBackToConsultation() {
        window.location.href = '/konsultasi';
      }

      // Fungsi untuk log out
      function logOut() {
        localStorage.removeItem('loggedInUser'); // Hapus data login dari localStorage
        alert('Anda telah berhasil keluar!');
        window.location.href = '/'; // Arahkan ke halaman login setelah log out
      }

      // Pastikan profil ditampilkan saat halaman dimuat
      window.onload = function() {
        displayProfile();
      }
    </script>
  </body>
</html>
